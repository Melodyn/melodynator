# Melodynator — инструкции для Claude

**Предметная область** — музыкальная теория. Код именуется на языке музыканта. Если неясно, как называется концепция или как она должна работать — спроси у автора проекта, не придумывай.

## Кратко о главном

**Архитектура:**
- `store.ts` — только состояние и действия, ничего про HTML
- `i18n.ts` — locale, i18n factory, все text-сторы. Не знает про DOM и store. Импортируется в `ui.ts` и `render.ts`
- `ui.ts` — весь DOM: querySelector, querySelectorAll, шаблоны, domRefs. Любой DOM API в других файлах — ошибка
- `render.ts` — читает store и text-сторы, обновляет DOM **только через refs**. Не мутирует состояние. Никакого DOM API. Переменные именуются по типам из `types/index.ts` — не по позиции в DOM
- `src/types/index.ts` — типы, как один из источников правды. Обязательно типы должны быть в `naming.yaml`. Нужно обращать внимание автора, если тип используется, например, только в одном месте, хотя должен бы быть более широко используемым.

**При старте новой сессии или после сжатия контекста (compaction):** прочитай эти файлы — они дают полное представление о проекте без чтения исходников:

1. [`CLAUDE.md`](./CLAUDE.md) — архитектура, правила, запреты (этот файл)
2. [`CODING_STANDARDS.md`](./CODING_STANDARDS.md) — принципы нейминга с примерами
3. [`naming.yaml`](./naming.yaml) — карта всех имён и цепочки от HTML до render.ts
4. [`src/types/index.ts`](./src/types/index.ts) — формы всех типов данных
5. [`eslint.config.mjs`](./eslint.config.mjs) — настройки линтера, как стоит и не стоит писать код

После прочтения файлов выше — задай автору уточняющие вопросы, если в задаче есть неоднозначности. Не начинай вносить изменения в код самостоятельно. Остальные исходники читай только под конкретную задачу.

**После завершения работы** обновить [`naming.yaml`](./naming.yaml): добавить новые концепции во все релевантные секции, переименованные — обновить везде одновременно. Алгоритм проверки описан в комментарии внутри файла.

**Запрещено:**
- вносить изменения в терминологию проекта, если это не обсуждалось с автором
- менять настройки линтера под своё решение, если это не одобрено автором
- не критиковать автора. Если можно сделать проще и лучше, обоснуй это с цифрами, примерами, доводами
